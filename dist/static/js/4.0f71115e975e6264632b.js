webpackJsonp([4],{73:function(e,o,t){function a(e){t(90)}var i=t(1)(t(79),t(95),a,null,null);e.exports=i.exports},79:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=t(19),i=t.n(a),n=t(18),s=t.n(n),d=t(4);t.n(d);o.default={data:function(){return{lists:s.a.data().admin,kindarr:[{name:"煤气灶",moodkind:"3"},{name:"五金",moodkind:"2"},{name:"灯具",moodkind:"1"}],moodObj:{moodkind:"",moodId:"",moodkindname:"",memberPrice:"",guige:"",changjing:"适用任何场景",name:"",descr:"0",showPath:"x",extPath:"x"},imgs:[],imgData:{accept:"image/gif, image/jpeg, image/png, image/jpg"},isShow:!1}},methods:{add_img:function(e){var o=this,a=new FileReader,i=this.$refs.imgfile.files[0];if(this.$refs.imgfile.files.length<1)return void t.i(d.Toast)({message:"请先选择您想要提交的图片",position:"center",duration:5e3});var n=0;for(var s in this.moodObj)if(""==this.moodObj[s]){n=1;break}if(1==n)return void t.i(d.Toast)({message:"请先填写完整的商品信息",position:"center",duration:1e3});var l=i.type,m=i.size;if(-1==this.imgData.accept.indexOf(l))return alert("请选择我们支持的图片格式！"),!1;if(m>3145728)return alert("请选择3M以内的图片！"),!1;var r=new FormData;r.append("file",i,i.name),this.$ajax.post(this.HOST+"/admin/upload",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){o.imgs.push({showPath:e.data.showUrl,extPath:e.data.extPath}),a.readAsDataURL(i),o.moodObj.showPath=e.data.showUrl,o.moodObj.extPath=e.data.extPath,o.$ajax.post(o.HOST+"/admin/addmood",o.moodObj).then(function(e){if(200==e.data.code){t.i(d.Toast)({message:"商品添加成功，请继续添加商品",position:"center",duration:5e3});for(var a in o.moodObj)o.moodObj[a]="",o.moodObj.changjing="适用任何场景",o.moodObj.name="",o.moodObj.descr="",o.moodObj.showPath="x",o.moodObj.extPath="x",o.imgs=[]}else t.i(d.Toast)({message:"商品添加失败，原因:"+e.data.msg,position:"center",duration:5e3}),remove(o.moodObj.extPath,0)}).catch(function(e){alert("系统繁忙，增加商品出错！")})}).catch(function(e){alert("系统繁忙，上传图片出错！")})},remove:function(e,o){var t=this;this.$ajax.post(this.HOST+"/admin/deleteImg",{path:e}).then(function(e){t.imgs.splice(o,1)}).catch(function(e){alert("删除图片出错！")})},selectKind:function(){this.isShow=!this.isShow},selectThis:function(e){this.isShow=!this.isShow,this.moodObj.moodkind=this.kindarr[e].moodkind,this.moodObj.moodkindname=this.kindarr[e].name}},mounted:function(){var e=this;this.$ajax.get(this.HOST+"/admin/findkind").then(function(o){e.kindarr=o.data.result}).catch(function(e){alert("请联系彭良韬")})},components:{topnav:i.a}}},85:function(e,o,t){o=e.exports=t(71)(!1),o.push([e.i,".myself label{display:inline-block;width:95px;-webkit-box-flex:0;-ms-flex:none;flex:none;overflow:hidden;padding:0 10px}.myself input,.myself label{font-size:16px;line-height:1}.myself input{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;border:0;-webkit-box-flex:1;-ms-flex:1;flex:1;outline:0}.selectUl{width:100px;background-color:#f4f4f4;margin-left:100px;text-align:center;font-size:16px;margin-bottom:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.addmoodbtn{width:2rem;height:.5rem}",""])},90:function(e,o,t){var a=t(85);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(72)("76fcb3cb",a,!0)},95:function(e,o){e.exports={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"clearfix"},[t("topnav",{staticClass:"topnav",attrs:{datas:e.lists}}),e._v(" "),t("div",{staticClass:"myself"},[t("label",[e._v("种类")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.moodObj.moodkindname,expression:"moodObj.moodkindname"}],attrs:{placeholder:"点击切换",readonly:""},domProps:{value:e.moodObj.moodkindname},on:{click:e.selectKind,input:function(o){o.target.composing||(e.moodObj.moodkindname=o.target.value)}}})]),e._v(" "),e.isShow?t("ul",{staticClass:"selectUl"},e._l(e.kindarr,function(o,a){return t("li",{on:{click:function(o){e.selectThis(a)}}},[e._v(e._s(o.name))])})):e._e(),e._v(" "),t("mt-field",{attrs:{label:"型号",placeholder:"型号"},model:{value:e.moodObj.moodId,callback:function(o){e.moodObj.moodId=o},expression:"moodObj.moodId"}}),e._v(" "),t("mt-field",{attrs:{label:"名称",placeholder:"名称"},model:{value:e.moodObj.name,callback:function(o){e.moodObj.name=o},expression:"moodObj.name"}}),e._v(" "),t("mt-field",{attrs:{label:"价格/元",placeholder:"价格",type:"number"},model:{value:e.moodObj.memberPrice,callback:function(o){e.moodObj.memberPrice=o},expression:"moodObj.memberPrice"}}),e._v(" "),t("mt-field",{attrs:{label:"规格/mm",placeholder:"规格"},model:{value:e.moodObj.guige,callback:function(o){e.moodObj.guige=o},expression:"moodObj.guige"}}),e._v(" "),t("mt-field",{attrs:{label:"功率/w",placeholder:"功率",type:"number"},model:{value:e.moodObj.descr,callback:function(o){e.moodObj.descr=o},expression:"moodObj.descr"}}),e._v(" "),t("mt-field",{attrs:{label:"适用场所",placeholder:"适用场所"},model:{value:e.moodObj.changjing,callback:function(o){e.moodObj.changjing=o},expression:"moodObj.changjing"}}),e._v(" "),e.imgs.length>=1?e._e():t("div",{staticStyle:{position:"relative"}},[t("input",{ref:"imgfile",staticClass:"upload",attrs:{type:"file"}})]),e._v(" "),e.imgs.length>=1?e._e():t("button",{staticClass:"addmoodbtn",on:{click:e.add_img}},[e._v("点击上传")])],1)},staticRenderFns:[]}}});